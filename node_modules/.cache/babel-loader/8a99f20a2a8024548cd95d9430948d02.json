{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"D:/Documents/node/asm3/Frontend Assignment 03/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Documents/node/asm3/Frontend Assignment 03/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Documents/node/asm3/Frontend Assignment 03/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import ProductAPI from'../API/ProductAPI';import{Link,useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import alertify from'alertifyjs';import{addCart}from'../Redux/Action/ActionCart';import CartAPI from'../API/CartAPI';import queryString from'query-string';import CommentAPI from'../API/CommentAPI';import convertMoney from'../convertMoney';function Detail(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),detail=_useState2[0],setDetail=_useState2[1];var dispatch=useDispatch();//id params cho từng sản phẩm\nvar _useParams=useParams(),id=_useParams.id;//id_user được lấy từ redux\nvar id_user=useSelector(function(state){return state.Cart.id_user;});//listCart được lấy từ redux\nvar listCart=useSelector(function(state){return state.Cart.listCart;});var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),product=_useState4[0],setProduct=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),star=_useState6[0],setStar=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),comment=_useState8[0],setComment=_useState8[1];// id_user đã đăng nhập\nvar idUser=useSelector(function(state){return state.Session.idUser;});// Listcomment\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),list_comment=_useState10[0],set_list_comment=_useState10[1];// state này dùng để load lại comment khi user gửi comment lên\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),load_comment=_useState12[0],set_load_comment=_useState12[1];// Hàm này dùng để lấy dữ liệu comment\n// Hàm này sẽ chạy lại phụ thuộc vào id Param\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var params,query,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params={idProduct:id};query='?'+queryString.stringify(params);_context.next=4;return CommentAPI.getCommentProduct(query);case 4:response=_context.sent;console.log(response);set_list_comment(response);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[id]);// Hàm thay đổi sao đánh giá\nvar onChangeStar=function onChangeStar(e){setStar(e.target.value);};// Hàm thay đổi comment\nvar onChangeComment=function onChangeComment(e){setComment(e.target.value);};// Hàm này dùng để bình luận\nvar handlerComment=function handlerComment(){if(idUser===''){alertify.set('notifier','position','bottom-left');alertify.error('Vui Lòng Kiểm Tra Đăng Nhập!');return;}var fetchSendComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var params,query,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:params={idProduct:id,idUser:localStorage.getItem('id_user'),fullname:localStorage.getItem('name_user'),content:comment,star:star};query='?'+queryString.stringify(params);_context2.next=4;return CommentAPI.postCommentProduct(query);case 4:response=_context2.sent;console.log(response);set_load_comment(true);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchSendComment(){return _ref2.apply(this,arguments);};}();fetchSendComment();setComment('');};// Hàm này dùng để load lại dữ liệu comment\n// Phụ thuộc vào state load_comment\nuseEffect(function(){if(load_comment){var fetchData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var params,query,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:params={idProduct:id};query='?'+queryString.stringify(params);_context3.next=4;return CommentAPI.getCommentProduct(query);case 4:response=_context3.sent;console.log(response);set_list_comment(response);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchData(){return _ref3.apply(this,arguments);};}();fetchData();set_load_comment(false);}},[load_comment]);//Hàm này gọi API và cắt chỉ lấy 4 sản phẩm\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var response,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return ProductAPI.getAPI();case 2:response=_context4.sent;data=response.data.products.splice(0,8);setProduct(data);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchData(){return _ref4.apply(this,arguments);};}();fetchData();},[]);//Phần này là để thay đổi số lượng khi mua sản phẩm\nvar _useState13=useState(1),_useState14=_slicedToArray(_useState13,2),text=_useState14[0],setText=_useState14[1];var onChangeText=function onChangeText(e){setText(e.target.value);};//Tăng lên 1 đơn vị\nvar upText=function upText(){var value=parseInt(text)+1;setText(value);};//Giảm 1 đơn vị\nvar downText=function downText(){var value=parseInt(text)-1;if(value===0)return;setText(value);};//Hàm này để lấy dữ liệu chi tiết sản phẩm\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return ProductAPI.getDetail(id);case 2:response=_context5.sent;setDetail(response.data.user);case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function fetchData(){return _ref5.apply(this,arguments);};}();fetchData();},[id]);//Phần này dùng để xem review hay description\nvar _useState15=useState('description'),_useState16=_slicedToArray(_useState15,2),review=_useState16[0],setReview=_useState16[1];var handlerReview=function handlerReview(value){setReview(value);};//Hàm này là Thêm Sản Phẩm\nvar addToCart=function addToCart(){var id_user_cart='';if(localStorage.getItem('id_user')){id_user_cart=localStorage.getItem('id_user');}else{id_user_cart=id_user;}var data={idUser:id_user_cart,idProduct:detail._id,nameProduct:detail.name,priceProduct:detail.price,count:text,img:detail.img1};if(localStorage.getItem('id_user')){console.log('Bạn Đã Đăng Nhập!');var fetchPost=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var params,query,response;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:params={idUser:id_user_cart,//localStorage.getItem('id_user')\nidProduct:detail._id,// Lấy idProduct\ncount:text// Lấy số lượng\n};query='?'+queryString.stringify(params);_context6.next=4;return CartAPI.postAddToCart(query);case 4:response=_context6.sent;if(response.data.error){alertify.set('notifier','position','bottom-left');alertify.error('Your must signin to use your cart!');}else{console.log(response);alertify.set('notifier','position','bottom-left');alertify.success('Sucessfull!');}case 6:case\"end\":return _context6.stop();}}},_callee6);}));return function fetchPost(){return _ref6.apply(this,arguments);};}();fetchPost();}else{alertify.set('notifier','position','bottom-left');alertify.error('Your must signin to use your cart!');// const action = addCart(data);\n// dispatch(action);\n}};return/*#__PURE__*/_jsx(\"section\",{className:\"py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row m-sm-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-2 p-sm-0 order-2 order-sm-1 mt-2 mt-sm-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"owl-thumbs d-flex flex-row flex-sm-column\",\"data-slider-id\":\"1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"owl-thumb-item flex-fill mb-2 mr-2 mr-sm-0\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:detail.img1,alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"owl-thumb-item flex-fill mb-2 mr-2 mr-sm-0\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:detail.img2,alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"owl-thumb-item flex-fill mb-2 mr-2 mr-sm-0\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:detail.img3,alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"owl-thumb-item flex-fill mb-2 mr-2 mr-sm-0\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:detail.img4,alt:\"...\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"carouselExampleControls\",className:\"carousel slide col-sm-10 order-1 order-sm-2\",\"data-ride\":\"carousel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-inner owl-carousel product-slider\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"carousel-item active\",children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block w-100\",src:detail.img1,alt:\"First slide\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"carousel-item\",children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block w-100\",src:detail.img2,alt:\"Second slide\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"carousel-item\",children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block w-100\",src:detail.img3,alt:\"Third slide\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"carousel-item\",children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block w-100\",src:detail.img4,alt:\"Third slide\"})})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"carousel-control-prev\",href:\"#carouselExampleControls\",role:\"button\",\"data-slide\":\"prev\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"carousel-control-prev-icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Previous\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"carousel-control-next\",href:\"#carouselExampleControls\",role:\"button\",\"data-slide\":\"next\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"carousel-control-next-icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Next\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-6\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:detail.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted lead\",children:[convertMoney(detail.price),\" VND\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"text-small mb-4\",children:detail.short_desc}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled small d-inline-block\",children:/*#__PURE__*/_jsxs(\"li\",{className:\"mb-3 bg-white text-muted\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-uppercase text-dark\",children:\"Category:\"}),/*#__PURE__*/_jsxs(\"a\",{className:\"reset-anchor ml-2\",children:[detail.category,\"s\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-stretch mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-5 pr-sm-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"border d-flex align-items-center justify-content-between py-1 px-3 bg-white border-white\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"small text-uppercase text-gray mr-4 no-select\",children:\"Quantity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"dec-btn p-0\",style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-caret-left\",onClick:downText})}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control border-0 shadow-0 p-0\",type:\"text\",value:text,onChange:onChangeText}),/*#__PURE__*/_jsx(\"button\",{className:\"inc-btn p-0\",style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-caret-right\",onClick:upText})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-3 pl-sm-0\",children:/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-dark btn-sm btn-block d-flex align-items-center justify-content-center px-0 text-white\",onClick:addToCart,children:\"Add to cart\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"ul\",{className:\"nav nav-tabs border-0\",children:/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link fix_comment\",onClick:function onClick(){return handlerReview('description');},style:review==='description'?{backgroundColor:'#383838',color:'#ffffff'}:{color:'#383838'},children:\"Description\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-content mb-5\",children:review==='description'?/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade show active\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 pb-4 bg-white\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-uppercase\",children:\"Product description \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted text-small mb-0\",style:{whiteSpace:'pre-wrap'},children:detail.long_desc})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade show active\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-4 p-lg-5 bg-white\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8\",children:list_comment&&list_comment.map(function(value){return/*#__PURE__*/_jsxs(\"div\",{className:\"media mb-3\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"rounded-circle\",src:\"https://img.icons8.com/color/36/000000/administrator-male.png\",alt:\"\",width:\"50\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-body ml-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0 text-uppercase\",children:value.fullname}),/*#__PURE__*/_jsx(\"p\",{className:\"small text-muted mb-0 text-uppercase\",children:\"dd/mm/yyyy\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-inline mb-1 text-xs\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item m-0\",children:/*#__PURE__*/_jsx(\"i\",{className:value.star1})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item m-0\",children:/*#__PURE__*/_jsx(\"i\",{className:value.star2})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item m-0\",children:/*#__PURE__*/_jsx(\"i\",{className:value.star3})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item m-0\",children:/*#__PURE__*/_jsx(\"i\",{className:value.star4})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item m-0\",children:/*#__PURE__*/_jsx(\"i\",{className:value.star5})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-small mb-0 text-muted\",children:value.content})]})]},value._id);})})})})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"h5 text-uppercase mb-4\",children:\"Related products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:product&&product.filter(function(el){return el.category===detail.category&&el._id!==detail._id;}).map(function(value){return/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 col-sm-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product text-center skel-loader\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-block mb-3 position-relative\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid w-100\",src:value.img1,alt:\"...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"product-overlay\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"mb-0 list-inline\"})})]}),/*#__PURE__*/_jsx(\"h6\",{children:/*#__PURE__*/_jsx(Link,{className:\"reset-anchor\",to:\"/detail/\".concat(value._id),children:value.name})}),/*#__PURE__*/_jsxs(\"p\",{className:\"small text-muted\",children:[convertMoney(value.price),\" VND\"]})]})},value._id);})})]})});}export default Detail;","map":{"version":3,"sources":["D:/Documents/node/asm3/Frontend Assignment 03/src/Detail/Detail.jsx"],"names":["React","useEffect","useState","ProductAPI","Link","useParams","useDispatch","useSelector","alertify","addCart","CartAPI","queryString","CommentAPI","convertMoney","Detail","props","detail","setDetail","dispatch","id","id_user","state","Cart","listCart","product","setProduct","star","setStar","comment","setComment","idUser","Session","list_comment","set_list_comment","load_comment","set_load_comment","fetchData","params","idProduct","query","stringify","getCommentProduct","response","console","log","onChangeStar","e","target","value","onChangeComment","handlerComment","set","error","fetchSendComment","localStorage","getItem","fullname","content","postCommentProduct","getAPI","data","products","splice","text","setText","onChangeText","upText","parseInt","downText","getDetail","user","review","setReview","handlerReview","addToCart","id_user_cart","_id","nameProduct","name","priceProduct","price","count","img","img1","fetchPost","postAddToCart","success","img2","img3","img4","short_desc","category","cursor","backgroundColor","color","whiteSpace","long_desc","map","star1","star2","star3","star4","star5","filter","el"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport ProductAPI from '../API/ProductAPI';\nimport { Link, useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport alertify from 'alertifyjs';\nimport { addCart } from '../Redux/Action/ActionCart';\nimport CartAPI from '../API/CartAPI';\nimport queryString from 'query-string';\nimport CommentAPI from '../API/CommentAPI';\nimport convertMoney from '../convertMoney';\n\nfunction Detail(props) {\n  const [detail, setDetail] = useState({});\n\n  const dispatch = useDispatch();\n\n  //id params cho từng sản phẩm\n  const { id } = useParams();\n\n  //id_user được lấy từ redux\n  const id_user = useSelector((state) => state.Cart.id_user);\n\n  //listCart được lấy từ redux\n  const listCart = useSelector((state) => state.Cart.listCart);\n\n  const [product, setProduct] = useState([]);\n\n  const [star, setStar] = useState(1);\n\n  const [comment, setComment] = useState('');\n\n  // id_user đã đăng nhập\n  const idUser = useSelector((state) => state.Session.idUser);\n\n  // Listcomment\n  const [list_comment, set_list_comment] = useState([]);\n\n  // state này dùng để load lại comment khi user gửi comment lên\n  const [load_comment, set_load_comment] = useState(false);\n\n  // Hàm này dùng để lấy dữ liệu comment\n  // Hàm này sẽ chạy lại phụ thuộc vào id Param\n  useEffect(() => {\n    const fetchData = async () => {\n      const params = {\n        idProduct: id,\n      };\n\n      const query = '?' + queryString.stringify(params);\n\n      const response = await CommentAPI.getCommentProduct(query);\n      console.log(response);\n\n      set_list_comment(response);\n    };\n\n    fetchData();\n  }, [id]);\n\n  // Hàm thay đổi sao đánh giá\n  const onChangeStar = (e) => {\n    setStar(e.target.value);\n  };\n\n  // Hàm thay đổi comment\n  const onChangeComment = (e) => {\n    setComment(e.target.value);\n  };\n\n  // Hàm này dùng để bình luận\n  const handlerComment = () => {\n    if (idUser === '') {\n      alertify.set('notifier', 'position', 'bottom-left');\n      alertify.error('Vui Lòng Kiểm Tra Đăng Nhập!');\n      return;\n    }\n\n    const fetchSendComment = async () => {\n      const params = {\n        idProduct: id,\n        idUser: localStorage.getItem('id_user'),\n        fullname: localStorage.getItem('name_user'),\n        content: comment,\n        star: star,\n      };\n\n      const query = '?' + queryString.stringify(params);\n\n      const response = await CommentAPI.postCommentProduct(query);\n      console.log(response);\n\n      set_load_comment(true);\n    };\n\n    fetchSendComment();\n\n    setComment('');\n  };\n\n  // Hàm này dùng để load lại dữ liệu comment\n  // Phụ thuộc vào state load_comment\n  useEffect(() => {\n    if (load_comment) {\n      const fetchData = async () => {\n        const params = {\n          idProduct: id,\n        };\n\n        const query = '?' + queryString.stringify(params);\n\n        const response = await CommentAPI.getCommentProduct(query);\n        console.log(response);\n\n        set_list_comment(response);\n      };\n\n      fetchData();\n\n      set_load_comment(false);\n    }\n  }, [load_comment]);\n\n  //Hàm này gọi API và cắt chỉ lấy 4 sản phẩm\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await ProductAPI.getAPI();\n      const data = response.data.products.splice(0, 8);\n      setProduct(data);\n    };\n\n    fetchData();\n  }, []);\n\n  //Phần này là để thay đổi số lượng khi mua sản phẩm\n  const [text, setText] = useState(1);\n  const onChangeText = (e) => {\n    setText(e.target.value);\n  };\n\n  //Tăng lên 1 đơn vị\n  const upText = () => {\n    const value = parseInt(text) + 1;\n\n    setText(value);\n  };\n\n  //Giảm 1 đơn vị\n  const downText = () => {\n    const value = parseInt(text) - 1;\n\n    if (value === 0) return;\n\n    setText(value);\n  };\n\n  //Hàm này để lấy dữ liệu chi tiết sản phẩm\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await ProductAPI.getDetail(id);\n      setDetail(response.data.user);\n    };\n\n    fetchData();\n  }, [id]);\n\n  //Phần này dùng để xem review hay description\n  const [review, setReview] = useState('description');\n  const handlerReview = (value) => {\n    setReview(value);\n  };\n\n  //Hàm này là Thêm Sản Phẩm\n  const addToCart = () => {\n    let id_user_cart = '';\n\n    if (localStorage.getItem('id_user')) {\n      id_user_cart = localStorage.getItem('id_user');\n    } else {\n      id_user_cart = id_user;\n    }\n\n    const data = {\n      idUser: id_user_cart,\n      idProduct: detail._id,\n      nameProduct: detail.name,\n      priceProduct: detail.price,\n      count: text,\n      img: detail.img1,\n    };\n\n    if (localStorage.getItem('id_user')) {\n      console.log('Bạn Đã Đăng Nhập!');\n\n      const fetchPost = async () => {\n        const params = {\n          idUser: id_user_cart, //localStorage.getItem('id_user')\n          idProduct: detail._id, // Lấy idProduct\n          count: text, // Lấy số lượng\n        };\n\n        const query = '?' + queryString.stringify(params);\n\n        const response = await CartAPI.postAddToCart(query);\n        if (response.data.error) {\n          alertify.set('notifier', 'position', 'bottom-left');\n          alertify.error('Your must signin to use your cart!');\n        } else {\n          console.log(response);\n          alertify.set('notifier', 'position', 'bottom-left');\n          alertify.success('Sucessfull!');\n        }\n      };\n      fetchPost();\n    } else {\n      alertify.set('notifier', 'position', 'bottom-left');\n      alertify.error('Your must signin to use your cart!');\n      // const action = addCart(data);\n      // dispatch(action);\n    }\n  };\n\n  return (\n    <section className=\"py-5\">\n      <div className=\"container\">\n        <div className=\"row mb-5\">\n          <div className=\"col-lg-6\">\n            <div className=\"row m-sm-0\">\n              <div className=\"col-sm-2 p-sm-0 order-2 order-sm-1 mt-2 mt-sm-0\">\n                <div\n                  className=\"owl-thumbs d-flex flex-row flex-sm-column\"\n                  data-slider-id=\"1\"\n                >\n                  <div className=\"owl-thumb-item flex-fill mb-2 mr-2 mr-sm-0\">\n                    <img className=\"w-100\" src={detail.img1} alt=\"...\" />\n                  </div>\n                  <div className=\"owl-thumb-item flex-fill mb-2 mr-2 mr-sm-0\">\n                    <img className=\"w-100\" src={detail.img2} alt=\"...\" />\n                  </div>\n                  <div className=\"owl-thumb-item flex-fill mb-2 mr-2 mr-sm-0\">\n                    <img className=\"w-100\" src={detail.img3} alt=\"...\" />\n                  </div>\n                  <div className=\"owl-thumb-item flex-fill mb-2 mr-2 mr-sm-0\">\n                    <img className=\"w-100\" src={detail.img4} alt=\"...\" />\n                  </div>\n                </div>\n              </div>\n\n              <div\n                id=\"carouselExampleControls\"\n                className=\"carousel slide col-sm-10 order-1 order-sm-2\"\n                data-ride=\"carousel\"\n              >\n                <div className=\"carousel-inner owl-carousel product-slider\">\n                  <div className=\"carousel-item active\">\n                    <img\n                      className=\"d-block w-100\"\n                      src={detail.img1}\n                      alt=\"First slide\"\n                    />\n                  </div>\n                  <div className=\"carousel-item\">\n                    <img\n                      className=\"d-block w-100\"\n                      src={detail.img2}\n                      alt=\"Second slide\"\n                    />\n                  </div>\n                  <div className=\"carousel-item\">\n                    <img\n                      className=\"d-block w-100\"\n                      src={detail.img3}\n                      alt=\"Third slide\"\n                    />\n                  </div>\n                  <div className=\"carousel-item\">\n                    <img\n                      className=\"d-block w-100\"\n                      src={detail.img4}\n                      alt=\"Third slide\"\n                    />\n                  </div>\n                </div>\n                <a\n                  className=\"carousel-control-prev\"\n                  href=\"#carouselExampleControls\"\n                  role=\"button\"\n                  data-slide=\"prev\"\n                >\n                  <span\n                    className=\"carousel-control-prev-icon\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"sr-only\">Previous</span>\n                </a>\n                <a\n                  className=\"carousel-control-next\"\n                  href=\"#carouselExampleControls\"\n                  role=\"button\"\n                  data-slide=\"next\"\n                >\n                  <span\n                    className=\"carousel-control-next-icon\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"sr-only\">Next</span>\n                </a>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-lg-6\">\n            <br></br>\n            <h1>{detail.name}</h1>\n            <br></br>\n            <p className=\"text-muted lead\">{convertMoney(detail.price)} VND</p>\n            <br></br>\n            <p className=\"text-small mb-4\">{detail.short_desc}</p>\n            <ul className=\"list-unstyled small d-inline-block\">\n              <li className=\"mb-3 bg-white text-muted\">\n                <strong className=\"text-uppercase text-dark\">Category:</strong>\n                <a className=\"reset-anchor ml-2\">{detail.category}s</a>\n              </li>\n            </ul>\n            <div className=\"row align-items-stretch mb-4\">\n              <div className=\"col-sm-5 pr-sm-0\">\n                <div className=\"border d-flex align-items-center justify-content-between py-1 px-3 bg-white border-white\">\n                  <span className=\"small text-uppercase text-gray mr-4 no-select\">\n                    Quantity\n                  </span>\n                  <div className=\"quantity\">\n                    <button\n                      className=\"dec-btn p-0\"\n                      style={{ cursor: 'pointer' }}\n                    >\n                      <i className=\"fas fa-caret-left\" onClick={downText}></i>\n                    </button>\n                    <input\n                      className=\"form-control border-0 shadow-0 p-0\"\n                      type=\"text\"\n                      value={text}\n                      onChange={onChangeText}\n                    />\n                    <button\n                      className=\"inc-btn p-0\"\n                      style={{ cursor: 'pointer' }}\n                    >\n                      <i className=\"fas fa-caret-right\" onClick={upText}></i>\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-sm-3 pl-sm-0\">\n                <a\n                  className=\"btn btn-dark btn-sm btn-block d-flex align-items-center justify-content-center px-0 text-white\"\n                  onClick={addToCart}\n                >\n                  Add to cart\n                </a>\n              </div>\n              <br></br>\n              <br></br>\n            </div>\n          </div>\n        </div>\n        {/* <div className='form-group'>\n\t\t\t\t\t<label htmlFor='exampleFormControlTextarea1'>Comment:</label>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\trows='3'\n\t\t\t\t\t\tonChange={onChangeComment}\n\t\t\t\t\t\tvalue={comment}></textarea>\n\t\t\t\t</div> */}\n        {/* <div className='d-flex justify-content-between'>\n\t\t\t\t\t<div className='d-flex w-25'>\n\t\t\t\t\t\t<span className='mt-2'>Evaluate: </span>\n\t\t\t\t\t\t&nbsp; &nbsp;\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName='form-control w-25'\n\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\tmin='1'\n\t\t\t\t\t\t\tmax='5'\n\t\t\t\t\t\t\tvalue={star}\n\t\t\t\t\t\t\tonChange={onChangeStar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t&nbsp; &nbsp;\n\t\t\t\t\t\t<span className='mt-2'>Star</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName='btn btn-dark btn-sm btn-block px-0 text-white'\n\t\t\t\t\t\t\tstyle={{ width: '12rem' }}\n\t\t\t\t\t\t\tonClick={handlerComment}>\n\t\t\t\t\t\t\tSend\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div> */}\n        <br />\n        <ul className=\"nav nav-tabs border-0\">\n          <li className=\"nav-item\">\n            <a\n              className=\"nav-link fix_comment\"\n              onClick={() => handlerReview('description')}\n              style={\n                review === 'description'\n                  ? { backgroundColor: '#383838', color: '#ffffff' }\n                  : { color: '#383838' }\n              }\n            >\n              Description\n            </a>\n          </li>\n          {/* <li className='nav-item'>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName='nav-link fix_comment'\n\t\t\t\t\t\t\tonClick={() => handlerReview('review')}\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\treview === 'review'\n\t\t\t\t\t\t\t\t\t? { backgroundColor: '#383838', color: '#ffffff' }\n\t\t\t\t\t\t\t\t\t: { color: '#383838' }\n\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\tReviews\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li> */}\n        </ul>\n        <div className=\"tab-content mb-5\">\n          {review === 'description' ? (\n            <div className=\"tab-pane fade show active\">\n              <div className=\"pt-4 pb-4 bg-white\">\n                <h6 className=\"text-uppercase\">Product description </h6>\n                <br></br>\n                <p\n                  className=\"text-muted text-small mb-0\"\n                  style={{ whiteSpace: 'pre-wrap' }}\n                >\n                  {detail.long_desc}\n                </p>\n              </div>\n            </div>\n          ) : (\n            <div className=\"tab-pane fade show active\">\n              <div className=\"p-4 p-lg-5 bg-white\">\n                <div className=\"row\">\n                  <div className=\"col-lg-8\">\n                    {list_comment &&\n                      list_comment.map((value) => (\n                        <div className=\"media mb-3\" key={value._id}>\n                          <img\n                            className=\"rounded-circle\"\n                            src=\"https://img.icons8.com/color/36/000000/administrator-male.png\"\n                            alt=\"\"\n                            width=\"50\"\n                          />\n                          <div className=\"media-body ml-3\">\n                            <h6 className=\"mb-0 text-uppercase\">\n                              {value.fullname}\n                            </h6>\n                            <p className=\"small text-muted mb-0 text-uppercase\">\n                              dd/mm/yyyy\n                            </p>\n                            <ul className=\"list-inline mb-1 text-xs\">\n                              <li className=\"list-inline-item m-0\">\n                                <i className={value.star1}></i>\n                              </li>\n                              <li className=\"list-inline-item m-0\">\n                                <i className={value.star2}></i>\n                              </li>\n                              <li className=\"list-inline-item m-0\">\n                                <i className={value.star3}></i>\n                              </li>\n                              <li className=\"list-inline-item m-0\">\n                                <i className={value.star4}></i>\n                              </li>\n                              <li className=\"list-inline-item m-0\">\n                                <i className={value.star5}></i>\n                              </li>\n                            </ul>\n                            <p className=\"text-small mb-0 text-muted\">\n                              {value.content}\n                            </p>\n                          </div>\n                        </div>\n                      ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n        <h2 className=\"h5 text-uppercase mb-4\">Related products</h2>\n        <div className=\"row\">\n          {product &&\n            product\n              .filter(\n                (el) => el.category === detail.category && el._id !== detail._id\n              )\n              .map((value) => (\n                <div className=\"col-lg-3 col-sm-6\" key={value._id}>\n                  <div className=\"product text-center skel-loader\">\n                    <div className=\"d-block mb-3 position-relative\">\n                      <img\n                        className=\"img-fluid w-100\"\n                        src={value.img1}\n                        alt=\"...\"\n                      />\n                      <div className=\"product-overlay\">\n                        <ul className=\"mb-0 list-inline\"></ul>\n                      </div>\n                    </div>\n                    <h6>\n                      <Link\n                        className=\"reset-anchor\"\n                        to={`/detail/${value._id}`}\n                      >\n                        {value.name}\n                      </Link>\n                    </h6>\n                    <p className=\"small text-muted\">\n                      {convertMoney(value.price)} VND\n                    </p>\n                  </div>\n                </div>\n              ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default Detail;\n"]},"metadata":{},"sourceType":"module"}